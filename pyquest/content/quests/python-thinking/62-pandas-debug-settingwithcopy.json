{
  "id": "62-pandas-debug-settingwithcopy",
  "world": "python-thinking",
  "title": "Debug: SettingWithCopyWarning",
  "story": "The infamous SettingWithCopyWarning! This occurs when you try to modify a slice or filtered view of a DataFrame. Learn to fix it properly.",
  "instructions": "Fix the code to avoid SettingWithCopyWarning. The code tries to update 'salary' for filtered rows. Use .loc[] properly to modify values.",
  "type": "debug_fix",
  "starterCode": "import pandas as pd\n\ndf = pd.DataFrame({\n    'name': ['Alice', 'Bob', 'Charlie'],\n    'department': ['HR', 'IT', 'HR'],\n    'salary': [50000, 60000, 55000]\n})\n\n# BUGGY: This causes SettingWithCopyWarning\nhr_employees = df[df['department'] == 'HR']\nhr_employees['salary'] = hr_employees['salary'] * 1.1\n\nprint(df)",
  "solutionHidden": "import pandas as pd\n\ndf = pd.DataFrame({\n    'name': ['Alice', 'Bob', 'Charlie'],\n    'department': ['HR', 'IT', 'HR'],\n    'salary': [50000, 60000, 55000]\n})\n\n# FIXED: Use .loc to modify original DataFrame directly\ndf.loc[df['department'] == 'HR', 'salary'] = df.loc[df['department'] == 'HR', 'salary'] * 1.1\n\nprint(df)",
  "tests": [
    {
      "id": "test1",
      "type": "output",
      "description": "Should update HR salaries by 10% in original DataFrame",
      "expectedBehavior": "Properly update DataFrame without copy warning",
      "expected": "      name department   salary\n0    Alice         HR  55000.0\n1      Bob         IT  60000.0\n2  Charlie         HR  60500.0"
    }
  ],
  "hints": [
    {
      "level": 1,
      "text": "Use df.loc[condition, column] = value to modify the original DataFrame directly."
    },
    {
      "level": 2,
      "text": "Don't create a filtered copy first. Use: df.loc[df['dept'] == 'HR', 'salary'] *= 1.1"
    },
    {
      "level": 3,
      "text": "Alice: 50000 * 1.1 = 55000, Charlie: 55000 * 1.1 = 60500"
    }
  ],
  "hintUnlockAttempts": 2,
  "xpReward": 40,
  "difficulty": "intermediate",
  "order": 62
}
