{
  "id": "69-ml-debug-leakage-normalize",
  "world": "python-thinking",
  "title": "Debug: Data Leakage - Normalization",
  "story": "Data leakage is when test set information influences training. Normalizing before splitting leaks test statistics into training!",
  "instructions": "Fix the data leakage bug. The code normalizes BEFORE splitting, which leaks test set statistics into the training process. Normalize AFTER splitting instead.",
  "type": "debug_fix",
  "starterCode": "import numpy as np\nfrom sklearn.model_selection import train_test_split\n\ndata = np.array([[100], [200], [300], [400], [500]])\n\n# BUGGY: Normalize before split (leaks test info!)\nmean = data.mean()\nstd = data.std()\ndata_normalized = (data - mean) / std\n\nX_train, X_test = train_test_split(data_normalized, test_size=0.2, random_state=42)\n\nprint(X_train.mean().round(3))",
  "solutionHidden": "import numpy as np\nfrom sklearn.model_selection import train_test_split\n\ndata = np.array([[100], [200], [300], [400], [500]])\n\n# FIXED: Split first, then normalize using ONLY train statistics\nX_train, X_test = train_test_split(data, test_size=0.2, random_state=42)\n\ntrain_mean = X_train.mean()\ntrain_std = X_train.std()\nX_train_normalized = (X_train - train_mean) / train_std\n\nprint(X_train_normalized.mean().round(3))",
  "tests": [
    {
      "id": "test1",
      "type": "output",
      "description": "Should print 0.0 (normalized train mean)",
      "expectedBehavior": "Normalize after split using only train stats",
      "expected": "0.0"
    }
  ],
  "hints": [
    {
      "level": 1,
      "text": "Split data first. Calculate mean/std only from train. Then normalize train using train stats."
    },
    {
      "level": 2,
      "text": "Never let test data influence training. Compute statistics from X_train only."
    },
    {
      "level": 3,
      "text": "Order: split → train_mean/std from X_train → normalize X_train"
    }
  ],
  "hintUnlockAttempts": 2,
  "xpReward": 40,
  "difficulty": "intermediate",
  "order": 69
}
